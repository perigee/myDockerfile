<!DOCTYPE html>
<html>
  <head>
    <title>Go with Docker 102</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>


<link rel="stylesheet" type="text/css" href="js/slides.css">



  </head>
  <body>


 <textarea id="source">



class: center, middle

# *Go* with Docker - 102

> By the developers, for the developers 


> Par les développeurs, pour les développeurs


> -- Jun HU aka Dr. Who
 
---

# Agenda

### - Summary of 101
### - Docker volume 
### - Network (iptable)
### - Dockerfile again
### - Manage image with Docker private registry


### - Working with Ansible (push and pull)

---


# Summary of 101 ![logo](https://www.docker.com/sites/all/themes/docker/assets/images/logo.png)


### An opensource app deployment platform coded in `Go`
### Sandbox - container equals isolated process(es)
### Run application as docker container
### Compose the containers to build complex system


---

# Summary of 101 ![logo](https://www.docker.com/sites/all/themes/docker/assets/images/logo.png)

### Run everywhere (share kernel with linux host)

- regardless of kernel (3.0+)
- regardless host distribution (ubuntu container on RedHat host)

### Comparing to VM

- processes are isolated, but run straight on the host
- native CPU performance
- a few percentage shave off for optional accounting
- small overhead on network performance


---

 
# Managing data in containers

### Data volume from host file system

```bash
$ docker create -ti -v /home/repo:/home/dockerRepo ubuntu /bin/bash
```

### Data volume container 

- Create a volume container


```bash
$ docker create -ti -v /data --name dbdata ubuntu /bin/true
```

PS: 

- `/bin/true` gives the possibility to create a new container even if it terminates still keeps the resulting container image and metadata lying around which can still be linked to



---
# Data volume container


### Line volume container to another container

```bash
$ docker run -d --volumes-from dbdata --name db1 postgresImage
$ docker run -d --volumes-from dbdata --name db2 postgresImage
```

PS:
- `/data` is the folder keeping the persistent data. 
- data volume container will not be deleted if there is at least a container with a reference to it. 

---
# Data volume container

### Backup, restore, or migrate data volumes 

- backup from a data volume container

```bash
$ docker run --volumes-from dbdata -v $(pwd):/backup ubuntu \
                          tar cvf /backup/backup.tar /dbdata
```

- restore the data to another container

```bash 
$ docker run -v /dbdata --name dbdata2 ubuntu /bin/bash
$ docker run --volumes-from dbdata2 -v $(pwd):/backup ubuntu \
                      cd /dbdata && tar xvf /backup/backup.tar
```



---
class: center, middle

# Thank you, Questions ?

    </textarea>

    <script src="js/remark-latest.min.js">

    </script>

    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
